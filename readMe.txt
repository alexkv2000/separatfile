/*Собрать ID карточек для удаления на Тестовом сервере*/
SELECT
	card_sys_info.InstanceID
FROM
	[dvtable_{30EB9B87-822B-4753-9A50-A1825DCA1B74}] card_main_info WITH (NOLOCK)
		INNER JOIN [dbo].[dvtable_{91b2c5f7-9324-4cef-9afe-a457c8310f06}] card_sys_info WITH (NOLOCK)
			ON card_sys_info.InstanceID = card_main_info.InstanceID
		INNER JOIN [dbo].[dvtable_{c7ba000c-6203-4d7f-8c6b-5cb6f1e6f851}] kinds_info WITH (NOLOCK)
			ON kinds_info.RowID = card_sys_info.Kind
WHERE
	(card_main_info.CreationDate < '2021.01.01' OR card_main_info.CreationDate IS NULL)
AND
	card_sys_info.Kind IN
	(
		'C2F4F770-8638-4555-9103-682509DA223D',		--Адаптация
		'FEE5F7A0-8622-4DF4-A9F6-EC4AE9B69D0B',		--Внутренние документы
		'F54E6D37-86ED-4A7F-BE0B-2F06D941B6A0',		--Входящий документ
		'6B048145-B83E-4BCD-9C23-71D21505331A',		--Заявка ДБУ
		'D08426AA-3F7F-431F-97F6-E00BD019D4B4',		--Заявка на организацию приема
		'21303560-87BC-4EE3-805F-47B8D7A3FA5A',		--Заявка на пропуск
		'3823776D-A732-43FD-8152-B24843F8555C',		--Заявка на ЭЦП
		'2E425AF6-CF72-428B-A232-AB5DDE5DC482',		--Исходящий документ
		'B9903A56-ED0D-4CC0-AECF-32DA0476102C',		--Кадровый документ
		'D91AE4FB-B782-43C6-9980-E490EF21E3A9',		--ОРД
		'864B37F0-09BC-4B4B-8F8A-F43BE15F95CB',		--Поручение
		'5C9235EC-5797-4D87-8275-3323C94CC579',		--Программа визита
		'523AED8C-435C-4F10-B6EA-D2F1590D6DC1',		--Финансовый документ

		'E7A15086-FDF7-4879-B205-EC286185D410',		--Акт
		'88A55BB2-0F39-4202-9D2B-C3711722C22C',		--Договор
		'8B37E125-1405-4F43-91CB-3EE9B9A2C76D',		--Договор группы
		'EFB5D5A1-D3A2-46B5-B356-2D6005C58835',		--Оснастка
		'980232C7-201E-4FDC-BB25-FFBB87A70552',		--Электронные заявки

		'8ACE1220-A452-455D-8EEB-9EDF9DC6E327',		--Входящий неформализованный документ
		'B9A1B75A-E91A-4CAC-83D5-3A570E1BA312',		--Входящий формализованный документ
		'3D2F5451-EAC4-470A-8E6A-637867A4F982',		--Исходящий формализованный документ
		'7A9BA189-6F99-40EA-8020-21B90C0AAE5C'		--Исходящий неформализованный документ
	)
ORDER BY kinds_info.Name

/*Получившийся файл разбить на мелкие для БП DocsVision с помощью текущей программы : separatFiles fileName countRow*/

/*Запуск через БП DocsVision «Шаблоны БП ГАЗ лежит шаблон процесса «Удаление карточек из списка»  */

Как провести массовое удаление карточек.

1.	Выполняем запрос который я приложил в письме, результатом будет список идентификаторов документов.
2.	Полученный список делим на как можно большее количество частей и сохраняем по .txt файлам так, чтобы на каждой строчке был идентификатор карточки. Желательное деление – от 10 000 до 100 000 идентификаторов в одном файле (чем ближе к меньшей границе тем лучше).
3.	Раздробленные .txt файлы сохраняем на какой-нибудь общий сервер/сетевую директорию, чтобы сервер ДВ имел к ней доступ и мог читать файлы.
4.	В папке «Шаблоны БП ГАЗ лежит шаблон процесса «Удаление карточек из списка» 
5.	Лучше где-нибудь в служебных сделать отдельную папку для хранения экземпляров процессов
6.	На каждый .txt файл с идентификаторами потребуется создать по процессу. Для этого дважды кликаем по процессу, выбираем папку куда его нужно сохранить и в окне ввода параметров указываем путь к .txt файлу. 
